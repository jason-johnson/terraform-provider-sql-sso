---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "sqlsso_mssql_server_aad_account Resource - terraform-provider-sqlsso"
subcategory: ""
description: |-
  sqlsso_mssql_server_aad_account enables AAD authentication for an Azure MS SQL server.
  For this to work terraform should be run for the configured Active Directory Admin account, not the SQL Server Admin as AD users can only be administered with the AD Admin account.
---

# sqlsso_mssql_server_aad_account (Resource)

`sqlsso_mssql_server_aad_account` enables AAD authentication for an Azure MS SQL server.

For this to work terraform should be run for the configured **Active Directory Admin** account, not the SQL Server Admin as AD users can only be administered with the AD Admin account.

## Example Usage

```terraform
provider "azurerm" {
  features {}
}

provider "sqlsso" {}

data "azurerm_client_config" "current" {}

resource "azurerm_resource_group" "example" {
  name     = "example-resources"
  location = "West Europe"
}

resource "azurerm_mssql_server" "example" {
  name                = "example-sqlserver"
  resource_group_name = azurerm_resource_group.example.name
  location            = azurerm_resource_group.example.location
  version             = "12.0"
  minimum_tls_version = "1.2"

  azuread_administrator {
    login_username              = "AzureAD Admin"
    object_id                   = data.azurerm_client_config.current.object_id
    azuread_authentication_only = true
  }
}

resource "azurerm_mssql_database" "example" {
  name      = "example-db"
  server_id = azurerm_mssql_server.example.id
}

resource "azurerm_service_plan" "example" {
  name                = "example-plan"
  resource_group_name = azurerm_resource_group.example.name
  location            = azurerm_resource_group.example.location
  os_type             = "Linux"
  sku_name            = "P1v2"
}

resource "azurerm_linux_web_app" "example" {
  name                = "example-linux-web-app"
  resource_group_name = azurerm_resource_group.example.name
  location            = azurerm_service_plan.example.location
  service_plan_id     = azurerm_service_plan.example.id

  site_config {}

  identity {
    type = "SystemAssigned"
  }
}

# This will require the right permissions, see azuread_service_principal
data "azuread_service_principal" "example" {
  object_id = azurerm_linux_web_app.example.identity[0].principal_id
}

resource "sqlsso_mssql_server_aad_account" "example" {
  sql_server_dns = azurerm_mssql_server.example.fully_qualified_domain_name
  database       = azurerm_mssql_database.example.name
  account_name   = azurerm_linux_web_app.example.name
  object_id      = data.azuread_service_principal.example.application_id
  role           = "owner"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `account_name` (String) The name of the account to add to the database.
- `database` (String) The name of the database to add the account.
- `object_id` (String) Azure AD object ID for the account.
- `sql_server_dns` (String) The DNS name of the SQL server to add the account.

### Optional

- `account_type` (String) Type of account to create: either a single user or an AAD group.
- `port` (Number) Port to connect to the database server.
- `role` (String) The role the account should get (e.g. owner, reader, etc.).

### Read-Only

- `id` (String) The ID of this resource.
